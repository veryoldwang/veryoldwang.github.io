<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<meta http-equiv = "X-UA-Compatible" content ="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width,initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no" />
<meta name="renderer" content="webkit"/>
<title>Man能量战出来</title>
<meta content="" name="Keywords">
<meta content="" name="Description">
<link rel="stylesheet" href="css/base.css">
<link rel="stylesheet" href="css/idangerous.swiper.css">
<link rel="stylesheet" href="css/tnl.css">
</head>
<body>
<!-- 音频 -->
<div class="audio-box">
	<i class="icon-audio"></i>
    <audio class="audio" src="" autoplay loop type="audio/mpeg"></audio>
</div>

<div class="swiper-container">
    <div class="swiper-wrapper">
    	<!--首页-->
      	<div class="swiper-slide page page1">
        	<div class="path">
            	<div class="logo"></div>
                <div class="title-item">
                    <h1 class="tt"></h1>
                    <div class="ligh1"></div>
                    <div class="ligh2"><img class="pic" src="images/page1-light2.png" /></div>
                </div>
                <div class="product-item"><img class="pic" src="images/page1-photo.png" /></div>
                <div class="btn-item">
                	<a class="next-btn btn" href="javascript:;"></a>
                </div>
                <div class="rule-box">
                	<a class="close-btn"></a>
                	<div class="text-item"><img class="pic" src="images/rule-text.png" /></div>
                </div>
            </div>
        </div>
        <!--首页 end-->
        
        <!--选择赛车-->
        <div class="swiper-slide page page2">
        	<div class="path">
            	<div class="logo"></div>
                <div class="tip-text"><img class="pic" src="images/page2-text.png" /></div>
                <div class="car-item">
                	<ul class="car-list clearfix">
                    	<li>
                        	<div class="tip">
                            	<img class="pic" src="images/page2-tip-text.jpg" alt="" />
                            </div>
                        </li>
                        <li>
                        	<div class="imgBox">
                            	<div class="front"><img class="pic" src="images/page2-product1.jpg" alt=""/></div>
                                <div class="back"><img class="pic" src="images/page2-car1.jpg" alt=""/></div>
                            </div>
                        </li>
                    	<li>
                        	<div class="imgBox">
                            	<div class="front"><img class="pic" src="images/page2-product2.jpg" alt=""/></div>
                                <div class="back"><img class="pic" src="images/page2-car2.jpg" alt=""/></div>
                            </div>
                        </li>
                        <li>
                        	<div class="imgBox">
                            	<div class="front"><img class="pic" src="images/page2-product3.jpg" alt=""/></div>
                                <div class="back"><img class="pic" src="images/page2-car3.jpg" alt=""/></div>
                            </div>
                        </li>
                        <li>
                        	<div class="imgBox">
                            	<div class="front"><img class="pic" src="images/page2-product4.jpg" alt=""/></div>
                                <div class="back"><img class="pic" src="images/page2-car4.jpg" alt=""/></div>
                            </div>
                        </li>
                        <li>
                        	<div class="imgBox">
                            	<div class="front"><img class="pic" src="images/page2-product5.jpg" alt=""/></div>
                                <div class="back"><img class="pic" src="images/page2-car5.jpg" alt=""/></div>
                            </div>
                        </li>
                    </ul>
                </div>
                <div class="btn-item">
                	<a class="next-btn btn" href="javascript:;"></a>
                </div>
            </div>
        </div>
        <!--选择赛车 end-->
        
        <!--游戏说明-->
        <div class="swiper-slide page page3">
        	<div class="path">
            	<div class="logo"></div>
            	<p class="tip-text">30秒内赛车获得的T能量越多，奖品越大</p>
                <ul class="explain-list">
                	<li><img class="pic" src="images/page3-explain1.png" alt="" /></li>
                    <li><img class="pic" src="images/page3-explain2.png" alt="" /></li>
                    <li><img class="pic" src="images/page3-explain3.png" alt="" /></li>
                </ul>
            	<div class="btn-item">
                	<a class="next-btn btn" href="javascript:;"></a>
                </div>
            </div>
        </div>
        <!--游戏说明 end-->
        
        <!--游戏结果-->
        <div class="swiper-slide page page4">
        	<div class="path">
            	<div class="logo"></div>
                <!--获得T能量-->
                <div class="text-item">
                	<h3 class="title"><img class="name" src="images/page4-title.png" alt="恭喜您"></h3>
                	<div class="text">
                    	<div class="num-item" grade='189'>	<!--游戏成绩grade-->
                            <i class="icon-num1 icon-num"></i>
                            <i class="icon-num2 icon-num"></i>
                            <i class="icon-num3 icon-num"></i>
                        </div>
                    </div>
                </div>
                <!--获得T能量 end-->
                <div class="imgBox"><img class="pic" src="images/page3-giftBag.png" alt="" /></div>
            	<div class="btn-item">
                	<a class="next-btn btn" href="javascript:;"></a>
                	<a class="prev-btn btn" href="javascript:;"></a>
                </div>
            </div>
        </div>
        <!--游戏结果 end-->
        
        <!--获得奖励-->
        <div class="swiper-slide page page5">
        	<div class="path">
            	<div class="logo"></div>
                <!--能量礼包-->
                <div class="s1">
                	<h3 class="title"><img class="name" src="images/acquire-s1-title.png" alt="恭喜您获得" /></h3>
                    <div class="award-item">
                    	<div class="imgBox"><a href="http://www.jd.com/"><img class="pic" src="images/acquire-s1-pic.png" alt="" /></a></div>
                        <div class="bg"><img class="pic" src="images/page1-light2.png" alt="" /></div>
                    </div>
                    <p class="text">点击拆开惊喜礼包</p>
                </div>
                <!--能量礼包 end-->
                
                <!--约战礼包:10元话费-->
                <div class="s2 none">
                	<h3 class="title"><img class="name" src="images/acquire-s1-title.png" alt="恭喜您获得" /></h3>
                    <div class="award-item">
                    	<div class="imgBox"><a class="next-btn" index='0' href="javascript:;"><img class="pic" src="images/acquire-s2-pic2.png" alt="" /></a></div>
                        <div class="bg"><img class="pic" src="images/page1-light2.png" alt="" /></div>
                    </div>
                </div>
                <!--约战礼包:10元话费 end-->
                
                <!--护肤礼盒-->
                <div class="s3 none">
                	<h3 class="title"><img class="name" src="images/acquire-s1-title.png" alt="恭喜您获得" /></h3>
                    <div class="award-item">
                    	<div class="imgBox"><a class="next-btn" index='1' href="javascript:;"><img class="pic" src="images/acquire-s3-pic2.png" alt="" /></a></div>
                        <div class="bg"><img class="pic" src="images/page1-light2.png" alt="" /></div>
                    </div>
                    <p class="text">点击拆开惊喜礼包</p>
                </div>
                <!--护肤礼盒 end-->
                
               
                <div class="share-pop">
                	<div class="logo"></div>
                	<div class="text-item"><img class="pic" src="images/share-text.png"  alt=""/></div>
                    <div class="code-item"><img class="pic" src="images/share-code.png" alt="" /></div>
                    <p class="tip-text">
                    	长按识别二维码<br>他能量北京、上海、广州卡丁车专场即将开战
                    </p>
                </div>
            </div>
        </div>
        <!--获得奖励 end-->
        
        <!--留资页：领取礼包-->
        <div class="swiper-slide page page6">
        	<div class="path">
            	<!--约战礼包:10元话费-->
                <div class="main s2 none">
                <form action="">
                	<h3 class="title"><img class="name" src="images/acquire-s1-title.png" alt="恭喜您获得" /></h3>
                    <div class="award-item">
                    	<div class="imgBox"><a class="next-btn" href="javascript:;"><img class="pic" src="images/acquire-s2-pic.png" alt="" /></a></div>
                        <div class="bg"><img class="pic" src="images/page1-light2.png" alt="" /></div>
                    </div>
                    <div class="text-item"><img class="pic" src="images/acquire-s2-text.png" alt="留名留号余额不再狂躁" /></div>
                    <div class="control-box">
                    
                    	<div class="control clearfix">
                        	<label class="label" for="username1">姓名</label>
                            <input type="text" class="input" id="username1" />
                        </div>
                        <div class="control clearfix">
                        	<label class="label" for="phone1">电话</label>
                            <input type="text" class="input" id="phone1" />
                        </div>
                    </div>
                    
                    <div class="btn-item">
                        <input class="share-btn btn" type="submit" value=" ">
                        <p class="tip-text">邀请好友拆礼包</p>
                    </div>
                </form>
                </div>
                <!--约战礼包:10元话费 end-->
            	
            	 <!--护肤礼盒-->
                <div class="main s3">
                <form action="">
                	<h3 class="title"><img class="name" src="images/acquire-s3-title.png" alt="恭喜您获得护肤礼盒" /></h3>
                    <div class="award-item">
                    	<div class="imgBox"><img class="pic" src="images/acquire-s3-pic.png" alt="" /></div>
                        <div class="bg"><img class="pic" src="images/page1-light2.png" alt="" /></div>
                    </div>
                    <div class="text-item"><img class="pic" src="images/acquire-s3-text.png" alt="留名留号能量马上送到" /></div>
                    <div class="control-box">
                    
                    	<div class="control clearfix">
                        	<label class="label" for="username2">姓名</label>
                            <input type="text" class="input" id="username2" />
                        </div>
                        <div class="control clearfix">
                        	<label class="label" for="phone2">电话</label>
                            <input type="text" class="input" id="phone2" />
                        </div>
                        <div class="control clearfix">
                        	<label class="label" for="addr2">地址</label>
                            <input type="text" class="input" id="addr2" />
                        </div>
                    </div>
                    
                    <div class="btn-item">
                        <input class="share-btn btn" type="submit" value=" ">
                        <p class="tip-text">邀请好友拆礼包</p>
                    </div>
                </form>
                </div>
            	<!--护肤礼盒 end-->
            </div>
        </div>
        <!--留资页：领取礼包 end-->
        
    </div>
    <div class="pagination none"></div>
</div>
<script src="js/jquery-2.1.1.min.js"></script>
<script src="js/zepto.min.js"></script>
<script src="js/idangerous.swiper.min.js"></script>
<script>
$( function(){
  
  //结果页-获得能量
  function grade(){
	var str=$(".num-item").attr("grade");  //得到属性值	
	var str_length=str.length;	//得到属性值的个数
	//数字小于3位数，前面补零
	var balance;
	var ooo="0";	
	if(str_length<3){
		balance=3-str_length;
		for(var y=0;y<balance-1;y++){
			ooo+="0";	
		}
		str=ooo+str;			
		str_length=str.length;
	}
	
	//对属性值截取，并把每个数字 存储到数组
	var num_arr=[];
	for(var i=str_length;i>=0;i--){
		num_arr+=str.substring(str_length-(i+1),str_length-i);
	}
	
	setTimeout(function(){
		$(".num-item .icon-num").each(function(index) {
			$(this).addClass("num-bg-"+num_arr[index]);	//挂上对应的class
		});
	},500) 
  }
  
  //下一页的回调函数	
  function page_next(){
	  if(mySwiper.activeIndex==3){
		 grade();
	  }   
  }	
	 
  $(".swiper-container,.swiper-slide").css({"width":$(window).width()+'px',"height":$(window).height()+'px'});
  $(".swiper-slide .path").css({"height":$(window).height()+'px'})
  var mySwiper = new Swiper('.swiper-container',{
    pagination: '.pagination',	//页数
    paginationClickable: true,	
    mode: 'vertical',		//垂直
	onlyExternal:true,		//不可滑动
	onSlideNext:page_next	//下一页回调函数
  })
  
  /*
  mySwiper.swipeNext()-执行过渡动画到下一滑块（slide）(简单来说就是滑动到下一个页面)
  mySwiper.swipePrev()-执行过渡动画到上一滑块
  mySwiper.swipeTo(index,speed,runCallbacks)	//跳到指定索引的页面
  mySwiper.activeIndex- 返回当前活动块的索引（number）
  
  http://www.cnblogs.com/scavengers/p/3760449.html  swiper插件API
  */
    
	//mySwiper.swipeTo(5)
	
	$(".next-btn").click(function(){
		if($(this).parents('.page').hasClass('page2')){
			if(!$(".car-list li").hasClass('active')){
				alert("请您翻牌选战车")	
				return false;	
			}
		}
		mySwiper.swipeNext();
	});
	$(".prev-btn").click(function(){
		mySwiper.swipePrev();
	})

	//音乐控制
	$(".audio-box .audio").get(0).play();	
	$(".icon-audio").click( function(){
		$(this).toggleClass("close");
		var audio=$(this).next(".audio")
		if($(this).hasClass("close")){
			audio.get(0).pause(true);
		}else{
			audio.get(0).play();		
		}	
	})
	
	//首页-规则层
	$(".rule-box .close-btn").click(function(){
		$(this).parent().addClass('close');	
		return false;
	})
	
	//选择赛车
	$(".car-list li:gt(0)").click(function(){
		$(this).addClass("active").siblings().removeClass("active");
		return false;	
	})
    
	$(".share-btn").click(function(){
		$(".share-pop").addClass('active');
		return false;	
	})
	
	$(".page5 .next-btn").click(function(){
		var index=$(this).attr('index');
		$(".page6 .main").eq(index).show().siblings().remove();
		console.log(index);
	})
	
})

</script>
</body>
</html>